# 有关无人机多方面的讨论：入门无人机



## 引言：

​	实际上我也不知道为啥要写这个玩意儿，莫名奇妙的，本来就是想整理一下资料，规划一下下一步需要做的无人机，但是整理着整理着就整理多了，多了多了吧，那就整理的完善一点，也并非什么坏处。以后要是想给别人看就给别人看，也不失为一件好事。故写吧。多写点。

​	本文实际上也是一篇学习笔记，算是鼓捣旋翼无人机来的一个过程总结，内容的源头非常广泛，有专业图书中的知识，个人制造中遇到的问题，还有一些来自航模爱好者的经验之谈，甚至有来自各论坛评论区中的网友讨论。总之，我个人认为，这东西我总结的还算不错。

​																		————日子人

## 参考资料：

电子工业出版社  ——《多旋翼无人机的设计与制作》

北京航空航天大学出版社 —— 《四轴飞行器DIY——基于STM32微控制器》

[无人机初级篇系列第 10 讲：机架设计]: https://zhuanlan.zhihu.com/p/43231311
[四旋翼无人机飞行器基本知识（四旋翼无人机结构和原理+四轴飞行diy全套入门教程）]: https://blog.csdn.net/weixin_43394322/article/details/92832164
[无人机——电池、电机、螺旋桨搭配]: https://blog.csdn.net/manbushuizhong/article/details/120484058
[航模电池如何正确使用和维护？]: https://zhuanlan.zhihu.com/p/355018765


[TOC]

## 一：机体篇

### 1 、机架: 

#### ① 轴距: 

​	对角线两电机中心的距离 （四轴），而严格的定义通常为电机轴心轴围成的外接圆周的直径，单位毫米mm，对称多旋翼无人机中轴距即为对角线上的两个电机轴心的距离，轴距的大小确定了螺旋桨的尺寸上限，从而限定了螺旋桨能产生的最大拉力，也就是直接影响到无人机的载重能力（ 一些比赛对此参数往往有要求，或大于或小于 )

在此附上轴距公式，在动力系统相关会详细讨论。
$$
R = \frac { r _ { m a x } } { \sin \frac { \theta } { 2 } } = \frac { r _ { m a x } } { \sin \frac { \pi } { n } }
$$

$$
其中： R为机架半径，\frac{1}{2}轴距
，r _ { m a x }为桨的最大半径，\theta为轴臂夹角，n为轴臂数量
$$

#### ② 材质:

​	机架的材质关乎机体的重量， 常见材料有塑料， 碳纤维，一些小型无人机也会采用PCB(印刷电路板)作为机架 ，也有用铝合金作为机架的案例 。*（笔者曾使用铝型材设计过一代机架，有着拔群的重量）*
​	而在结构连接件上， 常采用螺丝， 五金件， 3D打印结构件等。

------

##### 有关螺丝的讨论:

​	桨叶高速运动会导致螺丝松动，故会采用如自锁螺丝，黏着剂，螺丝胶等方式固定螺丝。

------



------

##### 有关机架材质的讨论:

​	在此我们先只讨论塑料与碳纤维。

​	***塑料***: 重量较轻， 强度和刚度不大，在螺丝固定情况下有松动可能 。成本低， 在 3D打印技术如此成熟的今天， 采用 3D打印的塑料机架不失为一种好选择 。

​	***碳纤维***: 密度低， 强度刚度高， 有一定的减振效果 。但成本相对较高， 我们所用的无人机往往是采用碳管作为
机臂， 这会带来电机难以对正的问题。穿越机常采用整块碳板作为机架。

------

#### ③ 重量:

​	机架最重要的参数，在设计时应使其尽可能轻使飞机有更多空余负载 。
同时对于重量有一定相关法规，参考 2024 年 1 月 1 日施行的 [《无人驾驶航空器飞行管理暂行条例》](https://www.gov.cn/zhengce/content/202306/content_6888799.htm)

```
（二）微型无人驾驶航空器，是指空机重量小于0.25千克，最大飞行真高不超过50米，最大平飞速度不超过40千米/小时，无线电发射设备符合微功率短距离技术要求，全程可以随时人工介入操控的无人驾驶航空器。
（三）轻型无人驾驶航空器，是指空机重量不超过4千克且最大起飞重量不超过7千克，最大平飞速度不超过100千米/小时，具备符合空域管理要求的空域保持能力和可靠被监视能力，全程可以随时人工介入操控的无人驾驶航空器，但不包括微型无人驾驶航空器。
（四）小型无人驾驶航空器，是指空机重量不超过15千克且最大起飞重量不超过25千克，具备符合空域管理要求的空域保持能力和可靠被监视能力，全程可以随时人工介入操控的无人驾驶航空器，但不包括微型、轻型无人驾驶航空器。
（五）中型无人驾驶航空器，是指最大起飞重量不超过150千克的无人驾驶航空器，但不包括微型、轻型、小型无人驾驶航空器。
（六）大型无人驾驶航空器，是指最大起飞重量超过150千克的无人驾驶航空器。
```

④ **起落架**: 

​	保证了机身与地面有一定安全距离， 在飞机降落时有一定缓冲，减小起飞降落时气流与地面的干扰 。加大重量的同时也使重心下移， 更有利于飞行时姿态的稳定 。

**同时附上设计准则：**


```
机体的基本设计原则:
(1)刚度、强度满足无人机的负载要求，机体不会发生晃动、弯曲。
(2)在满足其他设计的原则下，质量越轻越好。
(3)合适的长宽高比，各轴间距、结构布局适宜。
(4)飞行过程中，在满足其他设计的原则下，保证机体振动越小越好。
(5)美观耐用。
```

###  2、动力系统：

​	无人机的动力系统包含电机， 电调，正反桨， 电池 。

#### ① 电机: 

​	电机分为有刷无刷两种(以有无碳刷区分 )，一些小型无人机可能会采用无刷电机: 空心杯电机 。而我们现在重点着色于电调驱动的无刷电机 。

##### 电机型号:

​	往往为 4 位数字， 如 2212， 2216 等。这四位数字前后分割为两个两位数字， 前 2 位为转子直径， 后 2 位为转子高度 。																

<img src="..\..\image\6.jpg" alt="动子转子" style="zoom:25%;" />

​	电机越宽，产生扭矩越大。电机越高越窄，响应和速度都更快，更灵敏。

##### 电机KV值:

​	每个无刷电机都会标明电机KV值，这个KV值便是每增加1V电压所增加的每分钟空转转速例如: 我们有1000KV值的电机，电压提高 1 V， 在无桨叶的情况下，转速提升 1000 r/min 。

#### ②电调：

​	驱动电机用的调速器。无刷电机的驱动相对来说较为复杂，需要**单独的MCU**控制三相桥驱动。有刷电机一般用一个功率器件去驱动，通过调节PWM信号的脉冲宽度来控制各个电机的转速。有刷电机的电调通常为一个功率管，通过飞控的PWM输出来驱动。同时，一些电调还可以作为制动器或者稳压电源，给遥控接收器和舵机等供电。

##### 为什么需要电调?

​	电调的作用就是将飞控板的控制信号转变为电流的大小，以控制电机的转速。因为电机的电流是很大的，通常每个电机正常工作时平均有3A左右的电流，如果没有电调的存在，飞控板I/O口根本无法承受这样大的电流。

​	电调都会标上多少A(如20A、40A)，这个数字就是电调能够提供的电流。大电流的电调可以兼容用在小电流的地方。小电流电调不能超标使用。

```
根据简单测试，常见的新西达2212加1045浆最大电机电流有可能达到5A。为了保险起见，建议这样的配置用30A或40A电调(用20A电调的也比较多)，买大一点以后还可以用到其他地方去。
												——————《四轴飞行器 DIY--基于 STM32 微控制器》
```

##### 什么是四轴专用电调?

​	因为四轴飞行要求电调快速响应，而电调有快速响应和慢速响应的区别，所以需要快速响应的电调。其实大多数常见电调是可以通过编程来设置响应速度的，所以其实并不存在“专用”一说。

​	但是电调可接收的PWM信号频率是有区别的。笔者如再次选型再详细介绍。

##### 什么是电调编程?

​	首先要说明电调是有很多功能模式的，选择不同的功能就需要对电调编程编程的途径可以是直接将电调连接至遥控接收机的油门输出通道(通常是3道)，按照说明书在遥控器上通过扳动摇杆进行设置。这个方法比较麻烦，但成本较低。另外，还可以通过厂家的编程卡来进行设置(需要单独购买)，方法简单，不需接遥控器为了保险起见，一定要将购买的电调设置为一致，否则难以控制。如果电调的启动模式不一样，那么有些都转得很快了，有些还很慢，这就有问题了。

​	*注:通过遥控器进行电调设置，一定要接上电机，因为说明书上说的“滴滴”的声音是通过电机发出来的*
​	*注的注：可以去搜无刷电机唱歌*



​	具体使用应参照说明书对电调进行解锁等系列操作

#### ③正反桨：

​	为了抵消螺旋桨旋转带来的角动量，相临的桨旋转方向是不同的（我称其为临异对同），所以需要正反桨来保证桨产生的风都向下吹。**顺时针旋转产生向下推力的叫正浆、逆时针旋转产生向下推力的是反浆。**安装的时候，一定记得无论正反桨，有字的一面是向上的（桨叶圆润的一面要和电机旋转方向一致）。可放在电机或电钻上旋转测试（在保证安全的前提下），观察风向。 

​	螺旋桨的边缘相当尖锐，在此着重强调，无人机不是儿戏，无论设计制造还是操作我们都应对此有一定的敬畏之心，手指一定远离高速旋转的桨叶，因为高速旋转的螺旋桨而造成严重伤情的案例数不胜数。安全无论怎么强调都不多，小心永远不为过。

##### 桨的型号含义

​	同电机类似，桨也有啥1045，7040这些4位数字，前面2位代表桨的直径（单位：英寸 1英寸=254毫米）后面2位是桨的角度，有时参数标注也会更加直接，直接用桨的直径和角度表示型号，如5*45桨，其含义与5045相同。

##### 桨的固定方法

​	桨固定往往需要用桨座，桨座（也称为电机座或桨夹）是用于固定和连接螺旋桨与电机的关键部件。所常见的桨座形式有两种，一种是子弹头，一种是螺丝螺母固定；这两类桨座有正牙反压之分。

**正牙（右旋螺纹）**：这是最常见的螺纹类型，在顺时针旋转时会拧紧，逆时针旋转时会松开。

**反牙（左旋螺纹）**：与正牙相反，在逆时针旋转时会拧紧，顺时针旋转时会松开。

**而为什么有正牙反牙之分：**桨叶在高速旋转时，会因为推动空气而存在阻力，若桨叶顺时针旋转，便会受到逆时针的阻力，逆时针的阻力最终会作用在桨座上，为了保证逆时针的阻力不会将桨座拧松，故我们选择逆时针旋转时会拧紧的反牙桨座。反之，桨叶逆时针旋转，我们可以采用正牙。**正桨反牙，反桨正牙。**

有时顺逆时针也会用CW或CCW表示，见了别糊涂。

**CW** （clockwise）的缩写，表示顺时针旋转。

**CCW**（counter-clockwise）的缩写，表示逆时针旋转。



​	在选择螺旋桨时应充分考虑机架的条件，不能出现“螺旋桨打架”的情况。上文中有提到最大螺旋桨尺寸与机架轴距的关系式，而实际四轴无人机的搭配上，会采用这个经验公式。
$$
D _ { m m } = \frac { \sqrt { 2 } } { 2 } L \times 0.8
$$

$$
D _{in} = \frac{D _ { m m }}{25.4}
$$

$$
其中L为机架轴距，单位为mm，D为螺旋桨尺寸
$$

​	电机和螺旋桨的搭配是非常复杂的问题，所以建议读者采用常用或推荐的配置，这里简单阐述一下其原理。螺旋桨越大，升力就越大，但对应需要更大的力量来驱动；螺旋桨转速越高，升力越大；电机的kV越小，转动力量就越大；综上所述，大螺旋桨就需要用低kV电机，小螺旋桨就需要高kV电机(因为需要用转速来弥补升力的不足)。

​	同样，高kv值也带来更高的响应速度。
​	低kv值带来更高的载重。

​	如果高kV带大桨，力量不够，那么就很困难，实际还是低速运转，电机和电调很容易烧掉。
​	如果低kV带小桨，完全没有问题，但升力不够，可能会造成无法起飞。
​	例如:常用1000kV电机，配10英寸左右的桨。

​	看到这里，估计大家是有些糊涂的，实际上笔者在这里也非常混乱，所以我简述一下个人的选配思路。

```
第零步，尽量参考商家和大佬们的推荐配置。
第一步，根据载重和应用的类型大体确定机架的尺寸。
第二步，由机架的尺寸来确定桨的尺寸。
第三步，由桨和电池的类型和尺寸来确定电机的尺寸和KV值。
```

​	简而言之，先选择机架，由机架选螺旋桨，由螺旋桨选电机电调。这个思路还算是清晰明了。

###### 这里附上“四轴航拍电机桨搭配推荐”

###### 2S电池

KV1300-1500左右用9050浆 
KV1800左右用7060浆 
KV2500-3000左右用5X3浆 
KV3200-4000左右用4530浆 

###### 3S电池

1.8KG以下可用 2216 KV800电机搭配APC1147桨
2.0KG以下可用 2810 KV750电机搭配APC1238桨
2.5KG以下可用 2814 KV700电机搭配APC1340桨
KV900-1000的电机配1060或1047浆，9寸浆也可 
KV1200-1400配9050（9寸浆）至8*6浆 
KV1600-1800左右的7寸至6寸浆 
KV2200-2800左右的5寸浆 
KV3000-3500左右的4530浆 

###### 4S电池

2.5KG以下可用 2814 KV600电机搭配APC1340桨
3110 KV650电机搭配APC1238桨
3508 KV580/KV700电机搭配DJI1555/APC1540桨
4108 KV480/KV600电机搭配APC1447/APC1540桨

###### 6S电池

3KG以下可用 
3508 KV380电机搭配DJI1555桨
4108 KV380电机搭配DJI1555桨
4010 KV320电机搭配DJI1555桨
4008 KV400电机搭配APC1447桨



#### ④电池：

​	常用的无人机动力电池有锂电池、镍电池等类型。重量轻、容量大的电源，动力型锂电池是首选。

##### 为什么要选锂电池?

​	同样的电池容量，锂电池最轻，起飞效率最高。

##### 电池参数含义

​	电池上标注的mAh（毫安时）表示电池容量，（毫安时毫安时，多少毫安放一个小时）如2200mAh电池，如果以2200mA放电，可持续放电1h。如果以4400mA放电，可以持续放电0.5h。

​	电池后面2S、3S、4S代表锂电池电芯的节数。锂电池1节的标准电压为3.7V，2S代表有2个3.7V电池在里面，电压为 7.4V。

​	电池后面多少C代表电池放电能力，我们称其为放电倍率。这是普通锂电池和动力锂电池最重要的区别，动力锂电池需要很大的电流放电，这个放电能力就是用C来表示的。如2200mAh电池标准为25C，那么用25x2200mAh得出电池可以以55A的电流放电。这很重要，如果用低C的电池，大电流放电会导致电池损坏，甚至自燃。

##### 多少C快充是什么意思?

​	这个与上面的C一样，只是将放电变成了充电。如2200mAh电池，2C快充，代表可以用4400mA的电流来充电。千万不要图快而贸然用大电流，超过规定参数充电，电池很容易损坏。

##### 平衡充电器

​	平衡充电器是指能为串联电池充电的充电器，能使串联的各节电池达到彼此之间的相对平衡。使用平衡充电器，能使锂电池的寿命延长，并能在使用过程中增用电时间。因其在锂电池充电领域的安全性与电压精度的准确性，所以被大量应用与串联锂电池，特别是航模领域。

​	如3s电池，内部是3个锂电池，因为制造工艺原因，没办法保证每个电池完全一致，充电放电特性都有差异，电池串联的情况下，就容易照常某些放电过度或充电过度，充电不饱满等，所以解决办法是分别对内部单节电池充电。动力锂电都有2组线，1组是输出线（2根），1组是单节锂电引出线（与s数有关），充电时按说明书，都插入充电器内，就可以进行平衡充电了。

##### 怎么配电池?

​	这与选择的电机、螺旋桨，想要的飞行时间相关，容量越大，C越高，S越多，电池就越重。基本原则是用大桨，因为整体搭配下来功率高，自身升力大。为了保证飞行时间，可选高容量、高C、3S以上的电池。我们可以参照数据手册得知，电机所需的最大电流，电机可用的电压范围。以此来进行选型。

##### 如何计算放电最大电流？

​	公式：
$$
I = C \times Q_{\text{Ah}}
$$

```
I：最大放电电流（单位：安培，A）。
C：放电倍率（单位：C）。
Q：电池容量（单位：毫安时，mAh，需要转换为安时 Ah）。
```

例如：

我手中一块电池的容量为 2200mAh，放电倍率为 45C：

1. 将容量转换为安时：
   $$
   Q_{\text{Ah}} = \frac{2200}{1000} = 2.2 \, \text{Ah}
   $$
   
2. 计算最大放电电流：
   $$
   I = 45 \times 2.2 = 99 \, \text{A}
   $$
   

因此，该电池的最大放电电流为 **99A**。如果超过这个电流值，可能会对电池造成损伤或缩短其寿命。

##### 该如何判断电池电量？

​	在此略微提醒，动力锂电池是非常危险的，在使用时对电量要有一定程度的关注，避免过充和过放。我们衡量电池当前电量的标准往往是电池的电压。**单片电芯**可使用的范围大约是3.7V-4.2V，4.2V是每一节电池满电状态。如2s则含有两节电芯，可工作的总电压的范围便成了7.4V-8.4V，3s、4s同理。一般认为**单片电芯**的电压低于3.3V，就有可能对电池造成损伤，也就是过放了，过放会造成电池鼓包，给鼓包电池继续充电是有极大的安全隐患的。如果起飞前电池电压处于在3.7V左右，不建议再继续飞行，因为飞机起飞后，电池电压会大幅降低，低于极限使用电压。

​	我们可以采用“BB响”来读取电压，将其插在电池充电口，不仅能实时读取电压，还能在电压过低时发出警告。我们也可以通过规划飞控去读取电压并使其作出相应的应对措施。

​	在充电时，我们采用平衡充电器进行充电，上文对此有描述。在电池充电时，应全程值守，保证安全。确保每节电池的电压不超过4.2V。

------
##### 安全使用电池：

​	1.坚决不过充过放，充电全程值守。
​	2.电池正负极不能接触，远离火源，远离易燃。
​	3.飞机布局上使电池处于一个安全位置，避免炸机导致电池破损。
​	4.合理存放，防火防潮，不满电存放（存放电压在3.85V左右），可采用阻燃材料分隔，定期保养。

------



### 3、控制系统：

​	控制系统包含飞控，遥控器。

#### ①遥控器：

​	主要用于发送各种控制命令。

##### 通道

​	通道就是可以用遥控器控制的动作路数，比如遥控器只能控制四轴上下飞，那么就是1个通道。但四轴在控制过程中需要控制的动作路数有上下、左右、前后、旋转，所以起码得是4通道遥控器。

##### 接收机

​	接收机是用来接收遥控的信号并将信号通过自身的端口输出的模块。接收器接收来自遥控器的通道值信号，将其输送给飞控。信号可以是每个通道所属接口单独的PWM信号，也可以是将所有信号整合到一个接口，再通过通讯协议(如SBUS,PPM)解析，使飞控得到来自遥控器的指令，在下一篇会详细介绍如何解析通讯协议的。

<img src="..\..\image\7.png" style="zoom: 33%;" />





##### 什么是日本手、美国手?

​	遥控器上油门的位置在右边的是日本手，在左边的是美国手。遥控器飞行器当中控制供电电流大小。电流大则电机转得快，飞得高，力量大，反之同理，遥控器的油门很简单，遥控器2个摇杆当中上下扳动后不自动回到中间那个就是油门摇杆。

#### ②飞控：

​	飞控为飞行器的核心部件，在此我不展开详细描述，留到飞控篇。

## 二：飞控篇

​	实际上我一直在致力于自研飞控从高中至今，其结果也不能说是以失败告终。期间积累的经验十足珍贵，追求热爱的过程也值得纪念。在此对其进行一定记录和联想。

### 1，飞控

​	飞控是无人机的核心部件，相当于我们无人机的大脑，往往是一块或多块集成的电路板，其挂载MCU、陀螺仪、加速度计、磁力计、气压计等。飞控接收来自遥控器或其他设备的指令，读取整合各项传感器的数据，通过对电机转速的调整实现姿态的转换，以此来达到我们想要实现的效果。而如果没有飞控板，飞行器就会因安装，外界干扰，零件之间的不一致性等原因形成飞行力量不平衡，后果就是上下左右翻滚，无法飞行。

#### ①硬件组成：

​	
